{%- extends config.BASE_TEMPLATE %}

{% macro show_inclusion_item(lista) %}
    {% if not lista %}
        <p> {{ _('No elements found') }}</p>
    {% else %}
        {% for key,item in lista.items() %}                                           
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">{{ item["source"] }}</h5>
                <h6 class="card-subtitle mb-2 text-muted">{{ item["url"] }}</h6>
                <p class="card-text">
                    {{ _('Contact name: ') }} {{ item["contact"] }}
                    ({{ _('Email: ') }} {{ item["email"] }}})
                    <br/>
                    {{ _('Date: ') }}: {{ item["date"] }}
                    <br/>
                    <ul class="list-group list-group-flush">
                    {% for req in item["requeriments"] %}
                        <li class="list-group-item">{{ req }}</li>                                    
                    {% endfor %}
                    </ul>
                </p>
                <a href="{{ url_for('iroko_sources.acept_inclusion', key=key) }}" class="card-link">{{ _('Acepting Inclusion') }}</a>
                <a href="{{ url_for('iroko_sources.delete_inclusion', key=key) }}" class="card-link">{{ _('Rejecting the source') }}</a>
            </div>
        </div>
        {% endfor %}
    {% endif %}
{% endmacro %}

{% block page_body %}
<br/>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                {% if inclusions or rejections or accepted %}
                <h2>{{ _('Journals or Repositories for Inclusion in Sceiba') }}</h2>
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                          <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">
                                {{ _('New Inclusions') }}
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">
                                {{ _('Rejections') }}
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">
                                {{ _('Accepted') }}
                          </a>
                        </li>
                      </ul>
                      <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">{{ show_inclusion_item(inclusions) }}</div>
                        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">{{ show_inclusion_item(rejections) }}</div>
                        <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">{{ show_inclusion_item(accepted) }}</div>
                      </div>
                   

                {% else %}
                <h2>{{ _('Journal or Repository for new inclusions in Sceiba not found.') }}</h2>
                {% endif%}
            </div>
        </div>
    </div>
    
    
  
{% endblock page_body %}